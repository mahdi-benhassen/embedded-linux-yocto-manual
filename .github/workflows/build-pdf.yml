 name: build-pdf
 on:
   push:
     branches:
       - main
   pull_request:
   workflow_dispatch:
 jobs:
   build:
     runs-on: ubuntu-latest
     steps:
       - uses: actions/checkout@v4
       - name: Install TeX
         run: |
           sudo apt-get update
           sudo apt-get install -y --no-install-recommends \
             texlive-latex-recommended texlive-latex-extra \
             texlive-fonts-recommended texlive-fonts-extra \
             texlive-xetex latexmk
       - name: Build PDF
         run: latexmk -pdf -interaction=nonstopmode main.tex
       - name: Upload PDF
         uses: actions/upload-artifact@v4
         with:
           name: manual-pdf
           path: main.pdf
   release:
     if: startsWith(github.ref, 'refs/tags/')
     needs: build
     runs-on: ubuntu-latest
     steps:
       - uses: actions/download-artifact@v4
         with:
           name: manual-pdf
           path: .
       - uses: softprops/action-gh-release@v1
         with:
           files: main.pdf
