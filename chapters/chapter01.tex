\chapter{Foundations of Embedded Linux}

\section{What is Embedded Linux?}
Embedded Linux is the usage of the Linux kernel in embedded systemsâ€”devices that are not general-purpose computers. Unlike a desktop or server, an embedded system has:
\begin{itemize}
    \item \textbf{Resource Constraints}: Limited RAM, Flash, and CPU power.
    \item \textbf{Specific Purpose}: Designed for a single task (e.g., a router, a thermostat, a car dashboard).
    \item \textbf{High Reliability}: Must run for years without rebooting.
    \item \textbf{Real-Time Requirements}: Often needs to respond to hardware events within a deterministic timeframe.
\end{itemize}

\section{The Four Elements}
Every embedded Linux system consists of four distinct components. As an engineer, you are responsible for building and integrating all of them.

\subsection{1. Toolchain}
The compiler, linker, and libraries used to build code for the target architecture (e.g., ARM, RISC-V) on your host machine (x86).

\subsection{2. Bootloader}
The first code to run. It initializes the CPU, DRAM, and storage, then loads the Linux kernel.
\textit{Popular choices: U-Boot, Barebox.}

\subsection{3. Kernel}
The heart of the OS. It manages hardware resources (memory, interrupts, peripherals) and provides the API (System Calls) for applications.
\textit{Key tasks: Device Drivers, Scheduler, Network Stack.}

\subsection{4. User Space (Root Filesystem)}
Everything that runs on top of the kernel: init system, configuration files, libraries, and your application.
\textit{Key components: C Library (glibc/musl), BusyBox, systemd.}

\section{Licenses and Legal Obligations}
Linux is Open Source, but "Open" does not mean "Unregulated". You must comply with licenses.

\subsection{GPLv2 (The Kernel)}
The Linux Kernel is GPLv2.
\textbf{Obligation}: If you distribute a device with a modified kernel, you \textbf{must} provide the source code of the kernel (and your modifications) to the customer.

\subsection{GPLv3 (User Space)}
Many tools (Bash, Qt, GDB) are GPLv3.
\textbf{Tivoization Clause}: GPLv3 requires that the user must be able to \emph{install} modified software. If you lock down your bootloader (Secure Boot) such that the user cannot run their own Bash, you cannot use GPLv3 software.
\textit{Many embedded products avoid GPLv3 for this reason.}

\subsection{Proprietary Code}
Your application can remain closed-source if it runs in User Space and links dynamically against LGPL libraries (like glibc). Do \textbf{not} link statically against GPL libraries.

\section{Hardware Selection Criteria}
Choosing the right SoC (System on Chip) is critical.
\begin{enumerate}
    \item \textbf{Mainline Support}: Is the chip supported in the official Linux kernel? If yes, you get security updates and long-term stability. If no, you are stuck with a buggy, ancient "Vendor Kernel".
    \item \textbf{Documentation}: Is the Datasheet and Reference Manual public?
    \item \textbf{Community}: Is there an active Yocto layer (meta-freescale, meta-ti, meta-raspberrypi)?
\end{enumerate}
